local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")
local humanoid = character:WaitForChild("Humanoid")

local teleportPoints = {
    Vector3.new(-739.16, 93.00, -31.67),
    Vector3.new(-41.64, 93.10, -76.02),
    Vector3.new(555.06, 96.59, -162.58),
    Vector3.new(630.34, 235.19, -116.74),
    Vector3.new(667.44, 373.17, -542.18),
    Vector3.new(293.70, 287.47, -888.90),
    Vector3.new(321.22, 514.42, -830.89),
}

local teleportEnabled = false

local function teleportAllRenderStepped()
    local index = 1
    local connection
    connection = RunService.RenderStepped:Connect(function()
        if not teleportEnabled or not hrp or humanoid.Health <= 0 then
            connection:Disconnect()
            return
        end

        hrp.CFrame = CFrame.new(teleportPoints[index])
        index = index + 1

        if index > #teleportPoints then
            -- Auto reset titik terakhir setelah 2 detik
            task.delay(2, function()
                if humanoid and humanoid.Health > 0 then
                    humanoid.Health = 0
                end
            end)
            connection:Disconnect()
        end
    end)
end

local function createUI()
    local oldGui = player:WaitForChild("PlayerGui"):FindFirstChild("TeleportGUI")
    if oldGui then oldGui:Destroy() end

    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "TeleportGUI"
    ScreenGui.Parent = player:WaitForChild("PlayerGui")

    local MainFrame = Instance.new("Frame")
    MainFrame.Size = UDim2.new(0, 200, 0, 80)
    MainFrame.Position = UDim2.new(0.5, -100, 0, 50)
    MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    MainFrame.BorderSizePixel = 0
    MainFrame.AnchorPoint = Vector2.new(0.5, 0)
    MainFrame.Parent = ScreenGui

    local ToggleButton = Instance.new("TextButton")
    ToggleButton.Size = UDim2.new(0, 180, 0, 40)
    ToggleButton.Position = UDim2.new(0, 10, 0, 10)
    ToggleButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
    ToggleButton.TextColor3 = Color3.new(1, 1, 1)
    ToggleButton.Text = "Teleport: OFF"
    ToggleButton.Parent = MainFrame

    ToggleButton.MouseButton1Click:Connect(function()
        teleportEnabled = not teleportEnabled
        ToggleButton.Text = teleportEnabled and "Teleport: ON" or "Teleport: OFF"

        if teleportEnabled then
            teleportAllRenderStepped()
        end
    end)
end

createUI()

player.CharacterAdded:Connect(function(char)
    character = char
    hrp = character:WaitForChild("HumanoidRootPart")
    humanoid = character:WaitForChild("Humanoid")

    if not player.PlayerGui:FindFirstChild("TeleportGUI") then
        createUI()
    end

    if teleportEnabled then
        teleportAllRenderStepped()
    end
end)
